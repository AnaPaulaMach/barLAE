{% extends 'food/base.html' %}

{% block title %}Gestionar Descuentos{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center">Gestionar Descuentos</h1>
    <div class="row mt-5">
        <div class="col-md-6">
            <h2>Agregar Descuento</h2>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary">Agregar Descuento</button>
            </form>
        </div>
        <div class="col-md-6">
            <h2>Descuentos Actuales</h2>
            <ul>
                {% for descuento in descuentos %}
                <li>
                    {{ descuento.porcentaje_descuento }}% de descuento - 
                    {% if descuento.activo %}
                        Activo 
                        <form method="post" action="{% url 'food:desactivar_descuento' descuento.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">Desactivar</button>
                        </form>
                        <form method="post" action="{% url 'food:eliminar_descuento' descuento.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                        </form>
                    {% else %}
                        Inactivo
                        <form method="post" action="{% url 'food:activar_descuento' descuento.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-success btn-sm">Activar</button>
                        </form>
                        <form method="post" action="{% url 'food:eliminar_descuento' descuento.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                        </form>
                    {% endif %}
                </li>
                {% empty %}
                <li>No hay descuentos disponibles.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}
